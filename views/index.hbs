<link rel="stylesheet" href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/css/ol.css"
  type="text/css">

<h1>Down To Fight</h1>


<form id="form">
  <input name="msg" id="msg" type="text" />
  <input type="submit" />
</form>
<div id="chat"></div>

<div id="map" class="map"></div>

<script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>

<script type="text/javascript">
  var map = new ol.Map({
    target: 'map',
    layers: [
      new ol.layer.Tile({
        source: new ol.source.OSM()
      })
    ],
    view: new ol.View({
      center: ol.proj.fromLonLat([37.41, 8.82]),
      zoom: 4
    })
  });


</script>

<script>
  function locator() {
    if ("geolocation" in navigator) {
      console.log("sending gps");
      navigator.geolocation.getCurrentPosition(function (position) {
        //   sendIt(position.coords.latitude, position.coords.longitude);
        L.marker(position.coords.latitude, position.coords.longitude).addTo(mymap)
        console.log(position.coords.latitude, position.coords.longitude);

      });
    } else {
      console.log("you suck");
    }
  }
</script>

<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:8080');
  socket.on("news", function (data) {
    console.log("news channel", data);
    const chat = document.getElementById("chat");
    const message = document.createElement("div");
    message.innerHTML = data;
    chat.appendChild(message);
  });

  const form = document.getElementById("form");

  form.addEventListener("submit", function (e) {
    e.preventDefault();
    const msg = e.target[0].value;
    socket.emit("fromClient", msg);
  });
</script>

<button id='location' onclick="locator()">
  location
</button>